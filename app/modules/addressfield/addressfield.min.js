function addressfield_get_components(){return["name_line","first_name","last_name","country","thoroughfare","premise","locality","administrative_area","postal_code"]}function addressfield_inject_components(a,b,c){if(c){var d=drupalgap_form_get_element_id(b,a);$.each(c,function(a,b){var c=d+"-"+a,e=$("#"+c);if(e.get(0)){if("country"==a&&"US"!=b&&b!=$(e).val())return $(e).val(b).selectmenu("refresh",!0).change(),!1;"text"==$(e).attr("type")?$(e).val(b):"SELECT"==$(e).get(0).tagName&&$(e).val(b).selectmenu("refresh",!0)}})}}function addressfield_field_formatter_view(a,b,c,d,e,f,g){try{var h={};return $.each(f,function(a,b){h[a]={markup:theme("addressfield",b)}}),h}catch(i){console.log("addressfield_field_formatter_view - "+i)}}function addressfield_field_widget_form(a,b,c,d,e,f,g,h){try{_address_field_new_entity=!a.arguments.length||!a.arguments[0][entity_primary_key(a.entity_type)];var i=d.widget.settings.available_countries,j=f[g].id+"-country",k=0;for(var l in i)if(i.hasOwnProperty(l)){i[l];k++}f[g].item&&("undefined"==typeof _address_field_items[c.field_name]&&(_address_field_items[c.field_name]=[]),_address_field_items[c.field_name].push({id:f[g].id,item:f[g].item}));var m=d.widget.settings.default_country;if("site_default"==m)m="US";else if(empty(m)&&1==k)for(var l in i)if(i.hasOwnProperty(l)){m=i[l];break}var n={type:"select",title:"Country",options:{},attributes:{id:j,onchange:"_addressfield_field_widget_form_country_onchange(this, '"+f[g].id+"',"+g+",'"+c.field_name+"')"}};if(a.entity_type&&(n.attributes.entity_type=a.entity_type),a.bundle&&(n.attributes.bundle=a.bundle),empty(m)&&!d.required&&(n.options[""]="- None -"),$.isArray(i)&&0==i.length)n.suffix=drupalgap_jqm_page_event_script_code({page_id:drupalgap_get_page_id(),jqm_page_event:"pageshow",jqm_page_event_callback:"_addressfield_field_widget_form_country_pageshow",jqm_page_event_args:JSON.stringify({country_widget_id:j,delta:g,field_name:c.field_name,default_country:m,required:d.required})});else if($.each(i,function(a,b){n.options[a]=b}),f[g].item||!empty(m)){var l=f[g].item?f[g].item.country:m;n.suffix=drupalgap_jqm_page_event_script_code({page_id:drupalgap_get_page_id(),jqm_page_event:"pageshow",jqm_page_event_callback:"_addressfield_field_widget_default_country_pageshow",jqm_page_event_args:JSON.stringify({country_widget_id:j,default_country:l})})}f[g].children.push(n),f[g].children.push({markup:'<div id="'+j+'-widget"></div>'})}catch(o){console.log("addressfield_field_widget_form - "+o)}}function _addressfield_field_widget_form_country_pageshow(a){try{addressfield_country_get_list({success:function(b){var c="";$.each(b,function(a,b){c+='<option value="'+a+'">'+b+"</option>"}),empty(c)||$("#"+a.country_widget_id).append(c),"undefined"!=typeof _address_field_items[a.field_name]&&"undefined"!=typeof _address_field_items[a.field_name][parseInt(a.delta)]?setTimeout(function(){var b=_address_field_items[a.field_name][parseInt(a.delta)].item,c=$("#"+a.country_widget_id);c.val(b.country).selectmenu("refresh",!0).change()},1):empty(a.default_country)?empty(a.default_country)&&a.required&&setTimeout(function(){$("#"+a.country_widget_id).selectmenu("refresh",!0).change()},1):setTimeout(function(){$("#"+a.country_widget_id).val(a.default_country).selectmenu("refresh",!0).change()},1)}})}catch(b){console.log("_addressfield_field_widget_form_country_pageshow - "+b)}}function _addressfield_field_widget_default_country_pageshow(a){try{$("#"+a.country_widget_id).val(a.default_country).change()}catch(b){console.log("_addressfield_field_widget_default_country_pageshow - "+b)}}function addressfield_field_value_callback(a,b){try{var c=[],d=addressfield_get_components();for(var e in d)if(d.hasOwnProperty(e)){var f=d[e],g=a+"-"+f,h=$("#"+g).val();"undefined"!=typeof h&&c.push(h)}if(0==c.length||1==c.length&&empty(c[0]))return null;if(b.is_field)return c.join(",");var i={},d=addressfield_get_components();return $.each(d,function(a,c){var d=b.id+"-"+c;i[c]=$("#"+d).val()}),i}catch(j){console.log("addressfield_field_value_callback - "+j)}}function addressfield_get_country_name(a){try{return _addressfield_countries[a]}catch(b){console.log("addressfield_get_country_name - "+b)}}function _addressfield_widget_field_required(a,b){try{return in_array(b,a.required_fields)}catch(c){console.log("_addressfield_widget_field_required - "+c)}}function _addressfield_field_widget_form_country_onchange(a,b,c,d){try{var e=_addressfield_elements[b],f=$(a).val();addressfield_get_address_format_and_administrative_areas(f,{success:function(c){var f=c.address_format,g=c.administrative_areas,h="",i=[],j=$(a).attr("entity_type"),k=$(a).attr("bundle"),l=j&&k&&d.indexOf("field_")!=-1?drupalgap_field_info_instance(j,d,k):null,m=!1,n=!1,o=!1,p=!1,q=!1;l&&0==l.widget.settings.format_handlers["address-hide-street"]?(p=!0,q=!0):e.components&&(m="undefined"!=typeof e.components.name_line,n="undefined"!=typeof e.components.first_name,o="undefined"!=typeof e.components.last_name,p="undefined"!=typeof e.components.thoroughfare,q="undefined"!=typeof e.components.premise),!m||n||o||i.push({theme:"textfield",attributes:{placeholder:t("Full name"),id:b+"-name_line",class:"addressfield-name-line"},required:!0}),n&&!m&&i.push({theme:"textfield",attributes:{placeholder:t("First name"),id:b+"-first_name",class:"addressfield-first-name"},required:!0}),o&&!m&&i.push({theme:"textfield",attributes:{placeholder:t("Last name"),id:b+"-last_name",class:"addressfield-last-name"},required:!0}),p&&i.push({theme:"textfield",attributes:{placeholder:t("Address 1"),id:b+"-thoroughfare",class:"addressfield-thoroughfare"},required:!0}),q&&i.push({theme:"textfield",attributes:{placeholder:t("Address 2"),id:b+"-premise",class:"addressfield-premise"}}),i.push({theme:"textfield",attributes:{placeholder:f.locality_label,id:b+"-locality",class:"addressfield-locality"},required:_addressfield_widget_field_required(f,"locality")}),g&&i.push({theme:"select",options:g,attributes:{id:b+"-administrative_area",class:"addressfield-administrative-area"},required:_addressfield_widget_field_required(f,"administrative_area")}),i.push({theme:"textfield",attributes:{placeholder:f.postal_code_label,id:b+"-postal_code",class:"addressfield-postal-code"},required:_addressfield_widget_field_required(f,"postal_code")}),$.each(i,function(a,b){b.required&&(b.attributes.placeholder+="*"),h+=theme(b.theme,b)}),$("#"+$(a).attr("id")+"-widget").html(h).trigger("create")}})}catch(g){console.log("_addressfield_field_widget_form_country_onchange - "+g)}}function addressfield_services_postprocess_inject(){var a=addressfield_get_components();$.each(_address_field_items,function(b,c){$.each(c,function(b,c){var d=c.id,e=c.item;$.each(a,function(a,b){if("country"!=b){var c="#"+d+"-"+b;$(c).val(e[b]),"administrative_area"==b&&$(c).selectmenu("refresh",!0).change()}})})})}function addressfield_field_info_instance_add_to_form(a,b,c,d,e){try{e.value_callback="addressfield_field_value_callback"}catch(f){console.log("addressfield_field_info_instance_add_to_form - "+f)}}function addressfield_services_postprocess(a,b){"services_addressfield"==a.service&&_addressfield_localstorage_save(a,b),"services_addressfield"!=a.service||"get_address_format_and_administrative_areas"!=a.resource||_address_field_new_entity||addressfield_services_postprocess_inject()}function addressfield_assemble_form_state_into_field(a,b,c,d,e,f,g,h){try{h.use_delta=!1;var i={},j=addressfield_get_components();return $.each(j,function(a,b){var c=h.element_id+"-"+b;i[b]=$("#"+c).val()}),i}catch(k){console.log("hook_assemble_form_state_into_field - "+k)}}function addressfield_addressfield_local_storage_resolve(a,b){addressfield_services_postprocess_inject()}function _addressfield_localstorage_check(a){var b=_addressfield_localstorage_load(a);return b&&_addressfield_localstorage_resolve(b,a)}function _addressfield_localstorage_key(a){switch(a.resource){case"country_get_list":return"addressfield_"+a.resource;case"get_address_format":case"get_administrative_areas":case"get_address_format_and_administrative_areas":if(a.data){var b=JSON.parse(a.data),c="addressfield_"+a.resource;return b.country_code&&(c+="_"+b.country_code),c}}return a.path}function _addressfield_localstorage_load(a){var b=window.localStorage.getItem(_addressfield_localstorage_key(a));return b?JSON.parse(b):null}function _addressfield_localstorage_resolve(a,b){return!!b.success&&(b.success(a),module_invoke_all("addressfield_local_storage_resolve",a,b),!0)}function _addressfield_localstorage_save(a,b){window.localStorage.setItem(_addressfield_localstorage_key(a),JSON.stringify(b))}function country_get_list(a){return console.log("WARNING: country_get_list() is deprecated, use addressfield_country_get_list() instead!"),addressfield_country_get_list(a)}function addressfield_country_get_list(a){a.method="POST",a.path="services_addressfield/country_get_list.json",a.service="services_addressfield",a.resource="country_get_list",_addressfield_localstorage_check(a)||Drupal.services.call(a)}function addressfield_get_address_format(a,b){b.data=JSON.stringify({country_code:a}),b.method="POST",b.path="services_addressfield/get_address_format.json",b.service="services_addressfield",b.resource="get_address_format",_addressfield_localstorage_check(b)||Drupal.services.call(b)}function addressfield_get_administrative_areas(a,b){b.data=JSON.stringify({country_code:a}),b.method="POST",b.path="services_addressfield/get_administrative_areas.json",b.service="services_addressfield",b.resource="get_administrative_areas",_addressfield_localstorage_check(b)||Drupal.services.call(b)}function addressfield_get_address_format_and_administrative_areas(a,b){b.data=JSON.stringify({country_code:a}),b.method="POST",b.path="services_addressfield/get_address_format_and_administrative_areas.json",b.service="services_addressfield",b.resource="get_address_format_and_administrative_areas",_addressfield_localstorage_check(b)||Drupal.services.call(b)}function theme_addressfield_form_element(a){_addressfield_elements[a.id]=a;var b=a.id+"-country";_address_field_items[a.name]=[],a.element.value_callback||(a.element.value_callback="addressfield_field_value_callback");var c="_addressfield_field_widget_form_country_onchange(this, '"+a.id+"',0,'"+a.name+"')",d={title:"Country",options:{},attributes:{id:b,onchange:c}};return empty(a.default_country)&&!a.required&&(d.options[""]="- None -"),theme("select",d)+'<div id="'+b+'-widget"></div>'+drupalgap_jqm_page_event_script_code({page_id:drupalgap_get_page_id(),jqm_page_event:"pageshow",jqm_page_event_callback:"_addressfield_field_widget_form_country_pageshow",jqm_page_event_args:JSON.stringify({country_widget_id:b,delta:0,field_name:a.name,default_country:a.default_country,required:a.required})})}function theme_addressfield(a){try{var b="theme_addressfield_"+a.country;if(function_exists(b)){var c=window[b];return c(a)}var d="";return a.organisation_name&&""!=a.organisation_name&&(d+=a.organisation_name+"<br />"),a.name_line&&""!=a.name_line&&(d+=a.name_line+"<br />"),a.first_name&&""!=a.first_name&&(d+=a.first_name+"<br />"),a.last_name&&""!=a.last_name&&(d+=a.last_name+"<br />"),a.thoroughfare&&""!=a.thoroughfare&&(d+=a.thoroughfare+"<br />"),a.premise&&""!=a.premise&&(d+=a.premise+"<br />"),a.sub_premise&&""!=a.sub_premise&&(d+=a.sub_premise+"<br />"),a.locality&&""!=a.locality&&(d+=a.locality+"<br />"),a.dependent_locality&&""!=a.dependent_locality&&(d+=a.dependent_locality+"<br />"),a.administrative_area&&""!=a.administrative_area&&(d+=a.administrative_area+"<br />"),a.sub_administrative_area&&""!=a.sub_administrative_area&&(d+=a.sub_premise+"<br />"),a.postal_code&&""!=a.postal_code&&(d+=a.postal_code+"<br />"),a.country&&""!=a.country&&(d+=addressfield_get_country_name(a.country)),d}catch(e){console.log("theme_addressfield - "+e)}}function theme_addressfield_name(a){try{var b="";return a.organisation_name&&""!=a.organisation_name&&(b+=a.organisation_name+"<br />"),a.name_line&&""!=a.name_line?b+=a.name_line+"<br />":(a.first_name&&""!=a.first_name&&(b+=a.first_name,a.last_name&&""!=a.last_name&&(b+=" ")),a.last_name&&""!=a.last_name&&(b+=a.last_name+"<br />")),b}catch(c){console.log("theme_addressfield_name - "+c)}}function theme_addressfield_AT(a){try{var b=theme_addressfield_name(a);return a.thoroughfare&&""!=a.thoroughfare&&(b+=a.thoroughfare,b+=a.premise&&""!=a.premise?" - ":"<br />"),a.premise&&""!=a.premise&&(b+=a.premise+"<br />"),a.postal_code&&""!=a.postal_code&&(b+=a.postal_code+" "),a.locality&&""!=a.locality&&(b+=a.locality),b+="<br />Austria"}catch(c){console.log("theme_addressfield_AT - "+c)}}function theme_addressfield_CA(a){try{var b=theme_addressfield_name(a);return a.thoroughfare&&""!=a.thoroughfare&&(b+=a.thoroughfare+"<br />"),a.premise&&""!=a.premise&&(b+=a.premise+"<br />"),a.locality&&""!=a.locality&&(b+=a.locality,a.administrative_area&&""!=a.administrative_area&&(b+=", ")),a.administrative_area&&""!=a.administrative_area&&(b+=a.administrative_area,a.postal_code&&""!=a.postal_code&&(b+=" ")),a.postal_code&&""!=a.postal_code&&(b+=a.postal_code+"<br />"),b}catch(c){console.log("theme_addressfield_CA - "+c)}}function theme_addressfield_CH(a){try{var b=theme_addressfield_name(a);return a.thoroughfare&&""!=a.thoroughfare&&(b+=a.thoroughfare,b+=a.premise&&""!=a.premise?" - ":"<br />"),a.premise&&""!=a.premise&&(b+=a.premise+"<br />"),a.postal_code&&""!=a.postal_code&&(b+=a.postal_code+" "),a.locality&&""!=a.locality&&(b+=a.locality),b+="<br />Switzerland"}catch(c){console.log("theme_addressfield_CH - "+c)}}function theme_addressfield_DE(a){try{var b=theme_addressfield_name(a);return a.thoroughfare&&""!=a.thoroughfare&&(b+=a.thoroughfare,b+=a.premise&&""!=a.premise?" - ":"<br />"),a.premise&&""!=a.premise&&(b+=a.premise+"<br />"),b+=a.country+"-",a.postal_code&&""!=a.postal_code&&(b+=a.postal_code+" "),a.locality&&""!=a.locality&&(b+=a.locality),b+="<br />Germany"}catch(c){console.log("theme_addressfield_DE - "+c)}}function theme_addressfield_FR(a){try{var b=theme_addressfield_name(a);return a.thoroughfare&&""!=a.thoroughfare&&(b+=a.thoroughfare,b+=a.premise&&""!=a.premise?" - ":"<br />"),a.premise&&""!=a.premise&&(b+=a.premise+"<br />"),a.postal_code&&""!=a.postal_code&&(b+=a.postal_code+" "),a.locality&&""!=a.locality&&(b+=a.locality),b+="<br />France"}catch(c){console.log("theme_addressfield_FR - "+c)}}function theme_addressfield_GB(a){try{var b=theme_addressfield_name(a);return a.thoroughfare&&""!=a.thoroughfare&&(b+=a.thoroughfare+"<br />"),a.premise&&""!=a.premise&&(b+=a.premise+"<br />"),a.locality&&""!=a.locality&&(b+=a.locality+"<br />"),a.postal_code&&""!=a.postal_code&&(b+=a.postal_code+"<br />"),b+"United Kingdom"}catch(c){console.log("theme_addressfield_GB - "+c)}}function theme_addressfield_US(a){try{var b=theme_addressfield_name(a);return a.thoroughfare&&""!=a.thoroughfare&&(b+=a.thoroughfare+"<br />"),a.premise&&""!=a.premise&&(b+=a.premise+"<br />"),a.locality&&""!=a.locality&&(b+=a.locality,a.administrative_area&&""!=a.administrative_area&&(b+=", ")),a.administrative_area&&""!=a.administrative_area&&(b+=a.administrative_area,a.postal_code&&""!=a.postal_code&&(b+=" ")),a.postal_code&&""!=a.postal_code&&(b+=a.postal_code+"<br />"),b}catch(c){console.log("theme_addressfield_US - "+c)}}var _address_field_new_entity=!1,_address_field_items={},_addressfield_elements={},_addressfield_countries={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic Of",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory, Occupied",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"};